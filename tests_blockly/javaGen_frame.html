<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <script src="../lib/Blockly/blockly_compressed.js"></script>
    <script src="../lib/Blockly/blocks_compressed.js"></script>
    <script src="../lib/Blockly/msg/js/en.js"></script>
    <script src="../lib/Blockly/javascript_compressed.js"></script>
    <style>
      html, body {
        background-color: #fff;
        margin: 0;
        padding: 0;
        overflow: hidden;
        height: 100%;
      }
      .blocklySvg {
        height: 100%;
        width: 100%;
      }
    </style>
    <script>
        function myUpdateFunction() {
          var code = Blockly.JavaScript.workspaceToCode();
          document.getElementById('textarea').innerHTML=code;
      }
        function evaluateCode(){
                        try {
            eval(code);
        }catch (e) {
            alert(e);
        }
        }
        function init() {
            Blockly.inject(document.body, {toolbox: document.getElementById('toolbox')});
            Blockly.addChangeListener(myUpdateFunction);
            Blockly.JavaScript.addReservedWords('code');
            window.LoopTrap = 1000;
            Blockly.JavaScript.INFINITE_LOOP_TRAP = 'if(--window.LoopTrap =0) throw "Infinite loop?";\n';
            // Let the top-level application know that Blockly is ready.
            window.parent.blocklyLoaded(Blockly);
          }
    </script>
  </head>
  <body onload="init()">
    <xml id="toolbox" style="display: none">
      <block type="controls_if"></block>
      <block type="controls_repeat_ext"></block>
      <block type="logic_compare"></block>
      <block type="math_number"></block>
      <block type="math_arithmetic"></block>
      <block type="text"></block>
      <block type="text_print"></block>
    </xml>
      <p id="textarea">El código aparecerá aquí</p>
  </body>
</html>
